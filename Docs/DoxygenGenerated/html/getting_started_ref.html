<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>CloudBuilder Unity: Getting started</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">CloudBuilder Unity
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Getting started </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The CloudBuilder Unity plugin is cut in several parts:</p><ul>
<li>The core library, which contains all the core classes and communicates with our servers. It is small, has no dependencies and provides almost all functionality.</li>
<li>The facebook integration library. It depends on the facebook SDK for Unity and provides facebook related functionality. The integration library is provided as a separate package.</li>
</ul>
<p>In order to get started without third party login support, you can simply download the CloudBuilder library package. This package also includes a sample scene + script that you may include or not, as shown below.</p>
<div class="image">
<img src="importpackage01.png" alt="importpackage01.png"/>
<div class="caption">
Import package screen</div></div>
<p> You can deselect SampleScript.cs and SampleScene.unity if you do not need the sample code. After having imported the package, you just need to configure the CloudBuilder settings. For that, open the SampleScene and select the CloudBuilder object. In the inspector, set the appropriate values (API Key and API Secret) as configured in the backoffice.</p>
<p>Note: if you want to start from zero, you may simply add a new scene and drag&amp;drop the CloudBuilder prefab object from the CloudBuilder/Prefabs folder into your scene. This object needs to be placed on any scene where you want to use CloudBuilder functionality.</p>
<h1>Usage</h1>
<p>Basic usage is provided by the CloudBuilder prefab object. You just have to put it on your scene and invoke the GetClan method on it to fetch a <a class="el" href="class_cloud_builder_library_1_1_clan.html">CloudBuilderLibrary.Clan</a> object allowing to use most features. For that, you may simply use <code>FindObjectOfType&lt;CloudBuilderGameObject&gt;()</code>.</p>
<div class="fragment"><div class="line"><span class="keyword">private</span> Clan Clan;</div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> Setup() {</div>
<div class="line">    cb.GetClan(clan =&gt; {</div>
<div class="line">        Clan = clan;</div>
<div class="line">    });</div>
<div class="line">}</div>
</div><!-- fragment --><p>This code will fetch a clan object. This operation is asynchronous and may take a bit of time or operate instantly, depending on various conditions. You should do it at startup as shown above and keep it as a member of your class.</p>
<p>Another very important object is the <a class="el" href="class_cloud_builder_library_1_1_gamer.html">CloudBuilderLibrary.Gamer</a> object. This represents a signed in user, and provides all functionality that requires to be logged in. You will obtain it by logging in through the clan object.</p>
<div class="fragment"><div class="line">Clan.LoginAnonymously((Result&lt;Gamer&gt; result) =&gt; {</div>
<div class="line">    <span class="keywordflow">if</span> (!result.IsSuccessful)</div>
<div class="line">        Debug.LogError(<span class="stringliteral">&quot;Login failed: &quot;</span> + result.ToString());</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        Gamer = gamer.Value;</div>
<div class="line">        Debug.Log(<span class="stringliteral">&quot;Signed in successfully (ID = &quot;</span> + Gamer.GamerId + <span class="stringliteral">&quot;)&quot;</span>);   });</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1>Result handlers</h1>
<p>All functions are asynchronous. They use a simple pattern with a delegate as an action to execute when finished, and get passed a <code>Result&lt;Entity&gt;</code> as a parameter. The result indicates success or failure, encloses an entity (whose type depends on the call) and may contain additional information reported by the server.</p>
<p>A delegate for a given Entity is called <code>ResultHandler&lt;Entity&gt;</code> and is basically simply a function with one argument of type <code>Result&lt;Entity&gt;</code>. The entity is obtained through the <code>Value</code> member of the <code>Result&lt;Entity&gt;</code>.</p>
<h1>Error handlers</h1>
<p>In case a network error happens, the request is not retried by default. But there is a <code>HttpRequestFailedHandler</code> member on Clan which can be set to an user defined callback. This callback tells what to do with the error (retry it, cancel it).</p>
<div class="fragment"><div class="line">clan.HttpRequestFailedHandler = (HttpRequestFailedEventArgs e) =&gt; {</div>
<div class="line">    <span class="keywordtype">int</span> retriedAlready = 0;</div>
<div class="line">    <span class="keywordflow">if</span> (e.UserData != null)</div>
<div class="line">        retriedAlready = (int)e.UserData;</div>
<div class="line">    retriedAlready += 1;</div>
<div class="line">    e.UserData = retriedAlready;</div>
<div class="line">    if (retriedAlready &gt;= 10)</div>
<div class="line">        e.Abort();</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        e.RetryIn(milliseconds: 100);</div>
<div class="line">};</div>
</div><!-- fragment --><p>This should be done at the very startup, after the clan has been received. The handler is chosen when an HTTP request is built, so if you change it while an HTTP request is running, it will have no effect.</p>
<h1>Bundle</h1>
<p>Some function calls use bundles. They act as a generic, typed dictionary. Read more at <a class="el" href="class_cloud_builder_library_1_1_bundle.html">CloudBuilderLibrary.Bundle</a> . </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jun 3 2015 16:34:59 for CloudBuilder Unity by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
